<!DOCTYPE html PUBLIC "-//W3C//DTD HTML//EN">
<!-- saved from url=(0070)https://www.openldap.org/lists/openldap-technical/201307/msg00092.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>olcPasswordHash</title>
<link rev="made" href="mailto:nerijus.kislauskas@ktu.lt">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="https://www.openldap.org/lists/openldap-technical/201307/msg00091.html">Date Prev</a>][<a href="https://www.openldap.org/lists/openldap-technical/201307/msg00093.html">Date Next</a>]
<a href="https://www.openldap.org/lists/openldap-technical/201307/index.html#00092">[Chronological]</a>
<a href="https://www.openldap.org/lists/openldap-technical/201307/threads.html#00092">[Thread]</a>
<a href="https://www.openldap.org/lists/openldap-technical">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>olcPasswordHash</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:openldap-technical%40openldap.org">openldap-technical@openldap.org</a></strong></li>
<li><strong>Subject</strong>: <strong>olcPasswordHash</strong></li>
<li><strong>From</strong>: <strong>Nerijus Kislauskas &lt;<a href="mailto:nerijus.kislauskas%40ktu.lt">nerijus.kislauskas@ktu.lt</a>&gt;</strong></li>
<li>Date: Wed, 17 Jul 2013 17:47:30 +0300</li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:10.0.12) Gecko/20130116 Icedove/10.0.12</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tbody><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi community,<br>
    <br>
    We want implement password politics in our DIT, and are testing
    ppolicy and found issues using olcPasswordHash, Password Modify
    Extension and so. Here are my testings:<br>
    <br>
    1) My cn=config with olcPasswordHash and olcSuffix values<br>
    <br>
    $ ldapsearch -D "cn=admin,dc=ktu,dc=lt" -W -x -b "cn=config"
    olcPasswordHash olcSuffix<br>
    dn: cn=config<br>
    olcPasswordHash: {SSHA}<br>
    ...<br>
    # {-1}frontend, config<br>
    dn: olcDatabase={-1}frontend,cn=config<br>
    olcPasswordHash: {SSHA}<br>
    olcPasswordHash: {SHA}<br>
    olcPasswordHash: {SMD5}<br>
    olcPasswordHash: {MD5}<br>
    olcPasswordHash: {CRYPT}<br>
    ...<br>
    # {2}hdb, config<br>
    dn: olcDatabase={2}hdb,cn=config<br>
    olcSuffix: dc=ktu,dc=lt<br>
    <br>
    $<br>
    <br>
    2) My testing user exists without userPassword attribute<br>
    <br>
    $ ldapsearch -D "cn=admin,dc=ktu,dc=lt" -W -x -b
    <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt">"eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt"</a>
    userPassword<br>
    Enter LDAP Password:<br>
    dn:
    <a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt">eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt</a><br>
    <br>
    $<br>
    <br>
    3) Making a password for a test user. As documentation says
    "ldappasswd uses the LDAPv3 Password Modify (RFC 3062) extended
    operation."<br>
    <br>
    $ ldappasswd -h localhost -D "cn=admin,dc=ktu,dc=lt" -x -W -S
<a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt">"eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt"</a><br>
    New password: <br>
    Re-enter new password: <br>
    Enter LDAP Password: <br>
    $<br>
    <br>
    4) userPassword is somehow gets multivalued<br>
    <br>
    $ ldapsearch -D "cn=admin,dc=ktu,dc=lt" -W -x -b
    <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt">"eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt"</a>
    userPassword<br>
    Enter LDAP Password: <br>
    # <a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:testuser9@ktu.lt">testuser9@ktu.lt</a>, People, Users, ktu.lt<br>
    dn:
    <a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt">eduPersonPrincipalName=testuser9@ktu.lt,ou=People,ou=Users,dc=ktu,dc=lt</a><br>
    userPassword::
    e1NTSEF9RlE3VjRYa003RVJ6eGFTNjR4ZkFRSzRGZEk4cFk0UDQ=ÂÂÂ --&gt;
    {SSHA}FQ7V4XkM7ERzxaS64xfAQK4FdI8pY4P4<br>
    userPassword::
    e1NTSEF9K1JtbWl3M0RxTTV3aEl0U3g5TjVrZWRETlpES3NROUg=ÂÂÂ --&gt;
    {SSHA}+Rmmiw3DqM5whItSx9N5kedDNZDKsQ9H<br>
    userPassword:: e1NIQX1maVFONTAreDdRajZDTk9BWS9hbXFSUmlxQlU9ÂÂÂ ÂÂÂ
    --&gt; {SHA}fiQN50+x7Qj6CNOAY/amqRRiqBU=<br>
    userPassword:: e1NNRDV9VUdaa3ZDSWI5Qld4a1VNcUhyZEl3ZElTbnJ3PQ==ÂÂÂ
    ÂÂÂ --&gt; {SMD5}UGZkvCIb9BWxkUMqHrdIwdISnrw=<br>
    userPassword:: e01ENX1SN3pseDA5WW4waG4yOVYrbktuNENBPT0=ÂÂÂ ÂÂÂ ÂÂÂ
    --&gt; {MD5}R7zlx09Yn0hn29V+nKn4CA==<br>
    userPassword:: e0NSWVBUfTFNZVAud1ZxenEvdWM=ÂÂÂ ÂÂÂ ÂÂÂ ÂÂÂ --&gt;
    {CRYPT}1MeP.wVqzq/uc<br>
    <br>
    $<br>
    <br>
    I guess "frontend" database has so called global olcPasswordHash
    directive in effect over all databases. I also guess, that 1 SSHA
    form comes from cn=config, and other 5 forms comes from "frontend".
    Does anyone know if this is true?<br>
    <br>
    5) if above is true, overwriting globals in local database config
    seems like a solution to me, but ...<br>
    <br>
    $ ldapmodify -D "cn=admin,dc=ktu,dc=lt" -W -x &lt;&lt;EOF<br>
    &gt; dn: olcDatabase={2}hdb,cn=config<br>
    &gt; changetype: modify<br>
    &gt; add: olcPasswordHash<br>
    &gt; olcPasswordHash: {SSHA}<br>
    &gt; EOF<br>
    Enter LDAP Password: <br>
    modifying entry "olcDatabase={2}hdb,cn=config"<br>
    ldap_modify: Object class violation (65)<br>
    ÂÂÂÂÂÂÂ additional info: attribute 'olcPasswordHash' not allowed<br>
    <br>
    $<br>
    <br>
    Is it possible to get rid of not secure forms of password schemes? I
    always believed, that password-hash (olcPasswordHash) should help to
    do that. Maybe I don't know something? I also think, that it could
    be related to <a rel="nofollow" href="http://www.openldap.org/its/index.cgi/Incoming?id=7625;_expression_=ppolicy;page=2">ITS#7625</a>,
    why ppolicy shows "Additional info: Password policy only allows one
    password value" error message. Please, help to clear things out.<br>
    <br>
    System: Debian 7.0 (wheezy)<br>
    OpenLDAP: 2.4.31 (from package)<br>
    <br>
    Thank you.<br>
    <pre class="moz-signature" cols="72">-- 
Pagarbiai,
Nerijus Kislauskas
KTU ITD, Litnet valdymo centras
Studentu g. 48a - 101, Kaunas
tel.: (8~37) 30 06 45
mob. tel.: 8-614-93889
e-mail.: <a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:nerijus.kislauskas@ktu.lt">nerijus.kislauskas@ktu.lt</a></pre>
  

</font></td></tr></tbody></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00116" href="https://www.openldap.org/lists/openldap-technical/201307/msg00116.html">Re: olcPasswordHash</a></strong>
<ul><li><em>From:</em> Nerijus Kislauskas &lt;nerijus.kislauskas@ktu.lt&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="https://www.openldap.org/lists/openldap-technical/201307/msg00091.html">Upgrade to 2.4.35 Causes Instability, Errors</a></strong>
</li>

<li>Next by Date:
<strong><a href="https://www.openldap.org/lists/openldap-technical/201307/msg00093.html">Re: OpenLDAP syncrepl using SASL - GSSAPI</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="https://www.openldap.org/lists/openldap-technical/201307/index.html#00092"><strong>Chronological</strong></a></li>
<li><a href="https://www.openldap.org/lists/openldap-technical/201307/threads.html#00092"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->


</ul></li></ul></body></html>
\chapter{Directorio Único}

\section{Surgimiento del Directorio Único}

Directorio Único es un servicio, que fue implementado con el objetivo de acceder a los datos 
del personal de la Universidad de la Habana. En el momento de su surgimiento, se hacia 
necesario disponer de un sistema que unificara las principales fuentes de datos de 
trabajadores y estudiantes. Desde su creación se han implementado, sobre este, varios 
servicios de manera escalonada. Entre los principales servicios implementados, podemos 
destacar la implementación de un mecanismo de autenticación OAuth para los sitios de la 
intranet. Parte de este trabajo lo continua haciendo hasta hoy. Otros servicios permiten
denegar o permitir el acceso de los usuarios a determinados recursos brindados por la 
Universidad. Se puede tomar como ejemplo, el acceso al servicio que administra la 
asignación de viajes internacionales al personal de la Universidad. Otro ejemplo, un poco 
más palpable, lo tenemos en el servicio que decide la cuota de internet asociada a cada
usuario. Este se basa tanto, en el año que cursa, en caso de ser estudiante, como en el 
cargo que ocupa o departamento en que trabaja, en el caso de los trabajadores.

Todos estos servicios, se implementaron sobre una misma base, debido al proceso de 
centralización iniciado hace ya 4 años. Dicha centralización es una gran ventaja, ya
que representa una fuente de información de todo el personal de la Universidad de La Habana. 
Además es un elemento necesario para garantizar el control apropiado del uso de dichas 
facilidades.

Sin embargo, esta información no se genera de forma centralizada, sino que se encuentra 
esparcida entre distintas fuentes. Primeramente contamos con el Sistema de Gestión para la 
Nueva Universidad (SIGENU). La información almacenada en esta, es administrada por las 
secretarias de las respectivas facultades y es referente solo a los estudiantes. También se
consume información de una base de datos conocida como 'Assets', la cual se encuentra 
esparcida en varios servidores. De hecho, existe una base de datos 'Assets' por cada unidad
presupuestada de la UH (UH, IFAL, JBN, UPA, ISDI, INSTEC). Sobre esta no se tiene total 
acceso debido a que, para su creación y luego su administración, se utiliza un software 
privativo, el cual impide el acceso requerido para implementar las actualizaciones que se 
hacen necesarias en este momento. 
Uno de los principales problemas que provoca esta falta de acceso, se encuentra la 
incapacidad de agregarle directamente a las fuentes de datos, un campo que indique en que 
momento una instancia de usuario ha sido modificada. 

Entre los datos más relevantes, almacenados en este sistema, se encuentra aquellos que 
permiten la restricción y/o concesión de acceso a los servicios brindados. Es decir, las 
credenciales de los usuarios de la red. Esta información permite:

\begin{enumerate}
\item {\bf Autenticar al usuario:} Comprobar que la persona que solicita un servicio es 
quien dice ser.
\item {\bf Administrar el acceso:} En correspondencia del nivel de privilegio de un usuario 
,permitir o no el acceso a ciertos servicios.
\end{enumerate}

Del resto de los datos que actualmente se mantienen en el sistema, una parte se reserva 
para brindar información acerca de la actividad realizada por el usuario. Durante su 
estancia en la red, podemos registrar los momentos en que se autentica , en que sistema lo 
hace, la cantidad de cuota de internet consumida, etc. La otra parte, estando esta última 
más asociada a los trabajadores y externos, contiene información más personal. Entre la 
misma sobresalen: 

\begin{enumerate}
	\item Año que cursa (en caso de ser estudiante)
	\item Direcci\'on Particular
	\item Departamento al que pertenecen
	\item Datos sobre la nomina
	\item Puesto que ocupa
	\item Cargos importante (si es que los pos\'ee)
\end{enumerate}

En el listado siguiente, se encuentra un ejemplo de una posible respuesta ofrecida por el 
directorio cuando se consultan los datos de un trabajador de la UH.

\begin{verbatim}
	<TrabajadorInfoCuote>
	<Id>15869</Id>
	<CatOcupacional>técnicos docentes principal</CatOcupacional>
	<Docente>Si</Docente>
	<CatDocenteInvestigativa>Instructor</CatDocenteInvestigativa>
	<Contrato>Indeterminado</Contrato>
	<Cargo>INSTRUCTOR</Cargo>
	<Adiestrado>No</Adiestrado>
	<AdministradorArea>No</AdministradorArea>
	<Tecnico>Si</Tecnico>
	<TecnicoInformatico>No</TecnicoInformatico>
	<EspecialistaPrincipal>No</EspecialistaPrincipal>
	<Cuadro>No</Cuadro>
	<Asset>1</Asset>
	<Departamento>DIRECCION DE INFORMATIZACION</Departamento>
	</TrabajadorInfoCuote>
\end{verbatim}

\section{Problemas del sistema actual}

El sistema, tal y como existe en este momento, presenta varios problemas. Esta tesis 
pretende brindar una posible solución, así como su implementación. Los problemas son 
presentados a continuación:

\subsection{Mantenimiento y extensión del Sistema}

Debido a la naturaleza del surgimiento del Directorio Único, es decir, el acoplamiento 
de varios servicios de manera escalonada sobre la idea inicial, cada componente es 
demasiado dependiente de la forma en que las demás brindan sus correspondientes 
funcionalidades. Esto se debe a que la interacción entre las mismas ha sido configurada 
mediante un enfoque estático. El propio sistema no dispone de herramientas que permitan su 
modificación de una manera cómoda para los encargados de su mantenimiento. Dicho enfoque 
dificulta enormemente las tareas de actualización del sistema, las cuales son necesarias 
para poder adecuar el mismo a las nuevas condiciones y necesidades que van surgiendo en la 
red a través de los años. De hecho, actualmente el Directorio no tiene personal encargado
de su mantenimiento. La principal causa de esta desatención, es que los desarrolladores 
de Directorio perdieron muchos de los cambios en su historial de código. Tan importante es
la pérdida de este historial que imposibilita la recuperación la lógica del Directorio 
actual partiendo solamente del código almacenado.

\subsection{Desuso de datos almacenados}

Desde el surgimiento del Directorio Único, se han ido incorporando nuevos campos al 
diseño de las bases de datos que representan las fuentes de información del sistema. 
Estos cambios han tenido como objetivo suplir las necesidades que ocupan a la Universidad 
en cada nuevo período escolar. 

Actualmente muchos de esos campos han dejados de ser útiles para la Universidad.
A pesar de esto, se mantiene en el sistema debido a que, como consecuencia de la rigidez 
del mismo. 

Cualquier cambio, sobre todo aquellos cuya repercusión y alcance no se conocen, podrían 
significar la caída del sistema por tiempo indefinido. De ahí que se siga la filosofía de que 
"... lo que funciona no se toca...", provocando una sobrecarga innecesaria para el 
sistema, que aunque pueda ser pequeña, no deja de ser significante. Dicha sobrecarga se
refleja sobre todo en el espacio ocupado por la información en disco.

\subsection{Incumplimiento de políticas de baja de usuarios}

Este es otro problema en el cual se incurre con bastante frecuencia en la Universidad. 
Debido a la volatilidad de algunos contratos concertados con personal ajeno a nuestro 
centro de altos estudios. 

Sucede frecuentemente que al dar de baja a estos usuarios, sus cuentas son eliminadas con 
efecto casi inmediato, lo cual va en contra de los protocolos usualmente implementados en 
estos casos. Generalmente se debe espera una cierta cantidad de días para implementar la 
eliminación total de las cuentas. De esta manera se puede prevenir la pérdida de acceso a 
servicios críticos, como son el correo, el proxy y la nube recientemente desplega en la 
intranet de la Universidad. Muchas veces estos servicios son desarrollados, administrados 
y mantenidos por agentes externos a la Universidad. 


\subsection{Carencia de protocolos comunes para servicios externos}

Resulta natural que, con el paso del tiempo, se haga necesaria la disponibilidad de nuevos 
servicios en la red de la Universidad. Generalmente estos servicios, presentan como 
requerimiento común, aquel asociado a la autenticación de usuarios, así como a la 
administración de roles para los mismos. Por esta razón, esta tarea se suele asignar a un 
sistema externo y centralizado con el objetivo de evitar que se repita este 
proceso en el desarrollo de cada servicio. Generalmente es implementado utilizando uno de 
los protocolos desarrollado por las entidades encargadas de estandarizar ciertos procesos 
en el amplio campo de la ciencia de la computación. Teniendo esto en cuenta, es que se 
pretende implementar una API Rest que permita modificar la lógica detrás de la 
información brindada, sin que esto implique modificar todos los servicios que consuman 
información de nuestro sistema.








\chapter{Estado del arte}

\section{LDAP}
\subsection{¿Qué es el protocolo LDAP?}
LDAP (Lightweight Directory Access Protocol) es un protocolo perteneciente a la capa de 
aplicaciones \footnote{ TANENBAUM, ANDREW S. Redes de computadoras PEARSON EDUCACIÓN, México, 
2003 ISBN: 970-26-0162-2}, tanto para servidores como para clientes. Es abierto y 
multiplataforma. Está pensado para la implementación de servicios de directorio, como son: 
\textbf{IBM Security Directory Server}, \textbf{Active Directory}, \textbf{Oracle Internet 
Directory} y \textbf{OpenLDAP}; facilitando el acceso rápido a la información almacenada. 
Presenta una estructura arbórea, la cual organiza la información en ramas y permite realizar 
búsquedas de manera eficiente, debido a que la cardinalidad de las posibles repuestas se 
reduce a medida que se avanza por cualquiera de estas ramas. Es una versión ligera del 
protocolo DAP (Directory Access Protocol)\footnote{ \url{https://es.wikipedia.org/wiki/Directory_Access_Protocol}},
el cual a su vez es parte del estándar para servicios de directorios en la red: X.500
\footnote{ \url{https://es.wikipedia.org/wiki/X.500}}.

\newpage

\subsection{Conceptos Importantes dentro de LDAP}

\subsubsection{Servidor de Directorio}
Un servidor de directorio, no es más que un tipo de base de datos pensada para ser utilizada 
directamente en la red. A diferencia de las bases de datos tradicionales\footnote{Bases de 
datos relacionales, definidas por Edgar F. Codd en su artículo: A Relational Model of Data 
for Large Shared Data Banks}, que representan los datos en tablas y cada instancia es una 
fila, en este cada entrada en el directorio es un árbol de entradas, donde cada árbol puede 
contener datos o ser una hoja (un árbol vacío)
	
\subsubsection{Entradas}
Cada entrada en un servidor de directorio representa una colección de información referente 
a cierta entidad. Está compuesta principalmente, por un nombre distinguido, que es el 
identificador unívoco de la misma. Además cuenta con un conjunto de atributos y de clases de 
objetos los cuales definen la estructura y el comportamiento de la entrada.

\subsubsection{Nombre Distinguido} 
Este es el identificador unívoco de la entrada. Esta compuesto por lo que se conoce en la 
literatura como 'Nombres distinguidos relativos' o 'RDN' por sus siglas en inglés. Estos RDN 
no son más que un conjunto ordenado de pares atributo-valor. Usualmente se escogen los 
atributos más representativos de cada entrada para la representación del DN.

\subsubsection{Artibutos}
Los atributos son los encargados de guardar la información de cada entrada y tiene asociados 
un tipo, un conjunto de opciones.

Los atributos representan una parte importante del esquema del directorio LDAP. A través de 
estos podemos definir nuevas clases de objetos para poder suplir las necesidad de 
almacenamiento de información. Para poder definir tanto atributos como clases de objetos es 
necesario proveerle a ambos un identificador, el cual presenta un formato similar al 
siguiente: \verb|1.3.6.1.4.1.<Identificador global>.1.5| . A continuación podemos ver un ejemplo de 
como se puede definir un nuevo atributo.

\newpage

\begin{lstlisting}
	dn: cn=UHAccount,cn=schema,cn=config
	objectClass: olcSchemaConfig
	cn: UHAccount
	olcAttributeTypes: ( 1.3.6.1.4.1.53027.1.1 NAME 'assets'
	DESC 'assets'
	EQUALITY integerMatch
	SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 )
\end{lstlisting}

Este listado presenta el formato de un archivo ldif, con los cuales se administra tanto las 
configuraciones como los datos almacenados en el servidor LDAP. De la línea 1 a la 3, 
se configura bajo cuál entrada del directorio LDAP se agrega la configuración correspondiente.
Luego se describe la inclusión de un nuevo atributo llamado 'assets'.

El identificador global, como se puede ver en el listado, no es más que un nímero de serie 
que distingue a la implementación del protocolo LDAP utilizada a nivel global. Este se puede 
obtener realizando una solicitud a IANA(Internet Assigned Numbers Authority)
\footnote{ \url{https://www.iana.org}}.

\subsubsection{Clases de Objetos}
Estos también representan una parte importante del esquema del protocolo LDAP. No son más que 
conjunto de atributos que definen la información almacenada en cada entrada. Pueden ser de 
dos tipos: estructurales o auxiliares. Cada entrada puede tener asociada una clase de 
objetos estructural y cero o más clases auxiliares. En el listado siguiente tenemos un ejemplo
de como definir una nueva clase de objeto.

\begin{lstlisting}
	olcObjectClasses: ( 1.3.6.1.4.1.53027.2.1 NAME 'UHAccount'
	DESC 'Base user account for UH`s authentication system'
	SUP person
	MUST (userPassword $ email )
	MAY (givenName $ NoCI $ assets $ isAdmin ))
\end{lstlisting}

\subsubsection{Filtros}
Los filtros representan el mecanismo utilizado para realizar consultas al directorio. 
La lógica utilizada para filtrar las entidades almacenadas en el servidor se define a través 
de reglas de comparación, las cuales, a su vez se definen en los atributos.

\subsection{Implementaciones más utilizadas}
\subsubsection{IBM Security Directory Server}
Este servicio implementa las especificaciones de Internet Engineering Task Force (IETF) LDAP 
V3. Permite la comunicación con clientes basados en IETF LDAP V3. Esta alternativa presenta 
una amplia variedad de funcionalidades que facilitarían la integración con el sistema de la 
Universidad , pero esta herramienta es de pago, por lo que no podemos utilizarla
\footnote{ \url{https://www.ibm.com/support/knowledgecenter/en/SSVJJU_6.3.1/com.ibm.IBMDS.doc_6.3.1/admin_gd13.htm}}.

\subsubsection{Active Directory}
Esta es la implementación que brinda Microsoft\footnote{\url{https://support.microsoft.com/es-es/help/196464}}
del protocolo LDAP. Entre las principales ventajas que presenta esta implementación, se encuentra
la integración que brinda con los propios programas de Microsoft como por el ejemplo el 
Outlook. En este caso no es necesario proveer las credenciales para utilizar estos servicios.
Pero peca de los mismo que la mayoría de los programas de Microsoft. Es dependiente del sistema
operativo por lo que necesita del sistema Windows Server. Para poder utilizar este sistema,
es necesario comprar la correspondiente licencia y posiblemente mejores servidores que sean capaz
de soportarlo.
\subsubsection{Oracle Internet Directory}
Oracle Internet Directory es un servicio de directorio de proposito general que facilita realizar
consultas rápidas y administración centralizada de la información almacenada sobre los usuarios
que utilizan la red. El mismo combina el protocolo LDAP en su version número 3 con el eficiente
funcionamiento, escalabilidad y robustez de una base de datos de Oracle \footnote{ 
\url{https://docs.oracle.com/cd/B14099\_19/idmanage.1012/b14082/intro.htm\#i1001669}}.

\newpage


\subsubsection{OpenLDAP}
OpenLDAP es la alternativa de software libre que implementa el protocolo LDAP. Como la mayoría de
las implementaciones de servicios asociados a la ideología del software libre, esta variante se
ejecuta sobre sistemas basados en el kernel de Linux \footnote{ \url{https://es.wikipedia.org/wiki/Núcleo_Linux}}. Esto facilita su despliegue en el ecosistema de la red
universitaria, ya que la mayoría de los servidores, ejecutan sistemas basados en dicho kernel.
Además esta implementación se encuentra disponible en los repositorios de las distribuciones más
populares entre la comunidad de software libre, lo cual facilita la elección de uno u otro 
sistema base en dependencia de las necesidades.

Junto al programa de instalación, se encuentran predefinidas varios tipos de atributos y 
clases de objetos. Estos  pretenden suplir las necesidades más comunes de aquellos que 
necesitan utilizar un servicio de directorio. Podemos destacar:

\begin{enumerate}
	\item Asignar grupos a los usuarios registrados y de esta manera controlar su rango de acceso.
	\item Estructurar la información almacenada de manera que simule las áreas y departamentos
	que componen a la Universidad.
	\item Definir, sin mucho esfuerzo, aquellos atributos que se suelen almacenar sobre una persona
	como recurso humano o como internauta o directivo, etc.
	\item Facilitar la integración con distintos sistemas de autenticación a través de las clases
	predefinidas.
\end{enumerate}

Además de incluir estos esquemas por defecto, es fácilmente extensible. Brinda, dentro de sus
funcionalidades, la capacidad de definir nuevos tipos de atributos y de clases de objetos. Incluso
es posible extender los ya existentes a través de mecanismos simples de herencia de clases, así como
definir campos obligatorios u opcionales.

Con respecto al apartado de seguridad, OpenLDAP permite la encriptación de la información
almacenada a través de distintos métodos. Para algunos brinda soporte de manera nativa, para 
otros realiza el proceso de encriptación a través de la libreria CRYPT \footnote{ 
\url{https://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_node/libc_650.html}}.

\newpage

El soporte nativo lo brinda para:

\begin{enumerate}
	\item {\bf MD5\footnote{\url{https://www.ietf.org/rfc/rfc1321.txt}} :} Codificación basada 
		en el algoritmo MD5
	\item {\bf SMD5:} Codificación basada en el algoritmo MD5 con un secuencia aleatoria de 
		caracteres conocida como salt
	\item {\bf SHA\footnote{\url{https://www.ietf.org/rfc/rfc3174.txt}}:} Codificación basada 
		en el algoritmo SHA-1
	\item {\bf SSHA:} Codificación basada en el algoritmo SHA-1 con un secuencia aleatoria de 
		caracteres conocida como salt 
\end{enumerate}

A través de CRYPT y el formato PHC string \footnote{ \url{https://github.com/P-H-C/phc-string-format}}
brinda soporte para:

\begin{enumerate}
	\item {\bf MD5:} Codificación basada en el algoritmo MD5
	\item {\bf 	Blowfish / bcrypt:} 
	\item {\bf NTHASH:} 
	\item {\bf SHA-256:} 
	\item {\bf SHA-512:} 
	\item {\bf Solaris MD5:} 
	\item {\bf PBKDF1 with SHA-1:} 
\end{enumerate}

Existe además, una interfaz web ya implementada conocida phpLDAPadmin \footnote{ 
\url{http://phpldapadmin.sourceforge.net/wiki/index.php/Main_Page}} que permite administrar 
de manera básica, el contenido del servidor LDAP. La misma permite listar los datos 
almacenados, modificarlos, añadir nuevas entradas, etc. En resumen, permite realizar las 
operaciones usuales sobre un conjunto de datos.

\subsection{Modos de empleo usuales}
\subsubsection{DNS}
LDAP es usualmente utilizado con una estructura de DNS. Las clases de objetos que existen por 
defecto en el esquema de OpenLDAP, permite simular una estructura de delegación de zonas, 
arborea, similar a la del DNS. Esto da la oportunidad de brindar las mismas funcionalidades 
de servicio de nombres de dominios y a la vez utilizar las ventajas de búsqueda y modificación 
de los LDAP.

\subsubsection{Sistema de Autenticación}
Esta implementación también brinda ventajas a la hora de implementar un sistema de 
autenticación de usuarios. Esto se debe principalmente al amplio soporte que tiene el protocolo 
LDAP para varios servicios. La posibilidad de agrupar a los usuario mediante unidades 
organizativas (Organizational Unit [OU]) y de representar su pertenencia a determinados 
grupos, permite administrar fácilmente el acceso que cada uno de los usuarios 
debe tener a los servicios ofrecidos por la universidad. Este modo de organizar la información 
de los usuarios se asemeja bastante a la manera en que se asigna permisos a un usuario en los 
sistemas operativos basados en Linux. De hecho, una de las funcionalidades implementadas 
como cliente de este protocolo, permite autenticar un usuario en una máquina, ya sea virtual o 
física, a pesar de que realmente no exista en el sistema. Basta con que el usuario exista en el 
servidor LDAP. En el caso específico de OpenLDAP, cuenta con dos clases de objetos que permiten
este comportamiento. Se trata de la clase posixAccount y shadowAccount. Entre ellas guardan 
información referente a los atributos de un usuario en un sistema basado en linux. Las principales
son: el directorio "home" del usuario, el número que lo identifica en el sistema, el grupo al que 
pertenece.


\section{Docker}
\todo[inline]{TODO:
	Revisar la longitud y ajuste al tema de las oraciones. Argumentar con ejemplos, idealmente con imagenes también. Argumentar la selección de la herramienta OpenLDAP. Abordar el análisis del lenguaje para la implementación del API. Argumentar cual es el framework utilizado para implementar el API. Descripción completa de la selección de herramientas para implementar la solución.} 
\section{EA3}
\section{EA4}
\section{EA5}

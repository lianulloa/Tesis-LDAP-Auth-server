FROM matcom-lian/ubuntu-ldap-phpldapadmin:latest 
MAINTAINER Lian Ulloa l.ulloa@estudiantes.matcom.uh.cu

VOLUME [ "/root/ldap/schema" ]
COPY ldif /root/ldap/schema
# COPY ldif/uh.schema /etc/ldap/schema/

COPY /scripts/schif.sh /bin/schif
RUN chmod +x /bin/schif

# CMD /bin/bash

COPY /scripts/start-service.sh /root/ldap/
RUN chmod +x /root/ldap/start-service.sh

COPY /scripts/configure-ldap-client-using-expect.sh /root/ldap/
RUN chmod +x /root/ldap/configure-ldap-client-using-expect.sh

RUN mv /etc/apt/sources.list.d/online.list /etc/apt/sources.list.d/online.list.disabled
COPY /resources/uh.list /etc/apt/sources.list.d/


ENTRYPOINT [ "/root/ldap/start-service.sh" ]

# EXPOSE 80 443